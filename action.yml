---
name: mcaf-mcvs-golang-action
description: |
  The Mission Critical Acceleration Framework (MCAF)
  Mission Critical Vulnerability Scanner (MCVS) Golang action.
inputs:
  golang-version:
    description: |
      The Golang version that has to be installed and used.
    default: 1.21.5
    required: true
  golangci-lint-version:
    description: |
      The Golangci-lint version that has to be installed and used.
    default: v1.55.2
    required: true
runs:
  using: 'composite'
  steps:
    #
    # install a certain golang version
    #
    - uses: actions/setup-go@v4.0.0
      with:
        go-version: ${{ inputs.golang-version }}
        cache: false
    #
    # run golangci-lint
    #
    - uses: golangci/golangci-lint-action@v3.0.0
      with:
        args: --timeout 2m30s --config configs/.golangci.yml
        version: ${{ inputs.golangci-lint-version }}
    #
    # run gosec
    #
    - uses: securego/gosec@v2.18.2
      with:
        args: ./...
